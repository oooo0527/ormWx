<global-background>
  <custom-navbar title="ormkornnaphat" showBack="{{true}}" showHome="{{false}}"></custom-navbar>
<view class="container" style="margin-top: 108rpx;">
  <view class="publish-form">
    <view class="form-item">
      <input class="title-input" placeholder="请输入标题" value="{{title}}" bindinput="onTitleInput" maxlength="20" />
    </view>
    
    <view class="form-item">
      <textarea class="content-input" placeholder="请输入内容" value="{{content}}" bindinput="onContentInput" maxlength="500" />
    </view>
    
    <!-- 图片上传区域 -->
    <view class="form-item">
      <view class="image-upload-container">
        <view class="image-list">
          <block wx:for="{{imageList}}" wx:key="index">
            <view class="image-item">
              <image class="uploaded-image" src="{{item}}" mode="aspectFill" />
              <view class="delete-button" bindtap="deleteImage" data-index="{{index}}">✕</view>
            </view>
          </block>
          
          <!-- 添加图片按钮 -->
          <view class="add-image-button" wx:if="{{imageList.length < maxImageCount}}" bindtap="chooseImage">
            <text class="add-icon">+</text>
            <text class="add-text">添加图片</text>
          </view>
        </view>
        
        <view class="image-tip">最多可上传{{maxImageCount}}张图片</view>
      </view>
    </view>
    
    <!-- 提交按钮 -->
    <view class="submit-button-container">
      <button class="submit-button" bindtap="submitPublish">发布</button>
    </view>
    
    <!-- 测试按钮，用于调试 -->
    <view class="debug-section" wx:if="{{__isDebug}}">
      <button class="debug-button" bindtap="testCloudFunction">测试云函数</button>
    </view>
  </view>
</view>
</global-background>