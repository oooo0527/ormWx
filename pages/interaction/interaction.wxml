<global-background>

  <view class="container" style="margin-top: 88rpx;">
  <view class="title-container">
    <image src="/images/icon_data.png" mode="widthFix" class="title-image"></image>
  </view>
  
    <view class="list-container"> 
      <view class="custom-search-bar">
        <input class="search-input" placeholder="请输入搜索关键词" value="{{ searchValue }}" bindinput="onInput" bindconfirm="onConfirm" confirm-type="search" />
      </view>
      <view class="search-result" wx:if="{{searchFlag}}">
        <view class="search-item" wx:for="{{searchList}}" wx:key="index" data-index="{{index}}" bindtap="selectSearchResult">
          <view class="search-item-title">{{item.title}}</view>
          <view class="search-item-content">{{item.creator}}</view>
        </view>
      </view>

      <!-- 轮播图区域 -->
      <view class="carousel-container" wx:if="{{works.length > 0}}">

        <!-- 3D堆叠式轮播图 -->
        <view class="carousel-3d" bindtouchstart="touchStart" bindtouchmove="touchMove" bindtouchend="touchEnd">
          <!-- 卡片容器 -->
          <view class="cards-container">
            <!-- 只显示前3张卡片 -->
            <view class="carousel-card" wx:for="{{displayWorks}}" wx:key="id" style="transform: {{cardTransforms[index]}}; z-index: {{cardZIndexes[index]}}; opacity: {{cardOpacities[index]}};" data-index="{{index}}" bindtap="selectCard">
              <view class="card-content1">
             
                <view class="card-description">{{item.description}}</view>
                   <view class="card-title">{{item.title}}</view>
                    </view>
                <view class="card-more">
                          <view class="card-creator">{{item.creator}}</view>
                <view class="card-date">{{item.updateTime}}</view></view>
   
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 热门互动留言区域 -->
    <view class="hot-interactions-section" wx:if="{{hotInteractions.length > 0}}">
      <view class="section-title">热门互动留言</view>
      <scroll-view scroll-y="true" bindscrolltolower="onReachBottom">
      <view class="hot-interactions-list">
        <view class="hot-interaction-item" wx:for="{{hotInteractions}}" wx:key="id" data-index="{{index}}" bindtap="selectHotInteraction">
          <view class="hot-interaction-content">{{item.content}}</view>
          <view class="hot-interaction-info">
            <text class="creator">{{item.creator}}</text>
            <text class="comments-count">{{item.commentsCount}} 条评论</text>
          </view>
        </view>
      </view>
        <view wx:if="{{loadMore}}" class="load-more">你也太爱了...</view>
  <view wx:if="{{loadAll}}" class="load-all">人美心善得陈奥根本不够看</view>
      </scroll-view>
    </view>

    <!-- 悬浮按钮 -->
    <view class="float-button" bindtap="navigateToPublish">
      <text class="float-button-text">+</text>
    </view>

  </view>
</global-background>