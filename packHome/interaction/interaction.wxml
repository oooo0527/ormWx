<global-background>

  <view class="container" style="margin-top: 88rpx;">
    <view wx:if="{{!showDetail}}" class="list-container"> 
      <view class="custom-search-bar">
        <input class="search-input" placeholder="请输入搜索关键词" value="{{ searchValue }}" bindinput="onInput" bindconfirm="onConfirm" confirm-type="search" />
      </view>
      <view class="title">ormkornnaphat</view>

      <!-- 轮播图区域 -->
      <view class="carousel-container">

        <!-- 3D堆叠式轮播图 -->
        <view class="carousel-3d" bindtouchstart="touchStart" bindtouchmove="touchMove" bindtouchend="touchEnd">
          <!-- 卡片容器 -->
          <view class="cards-container">
            <!-- 只显示前3张卡片 -->
            <view class="carousel-card" wx:for="{{displayWorks}}" wx:key="id" style="transform: {{cardTransforms[index]}}; z-index: {{cardZIndexes[index]}}; opacity: {{cardOpacities[index]}};" data-index="{{index}}" bindtap="selectCard">
              <image class="card-bg" src="{{item.cover}}" mode="aspectFill" lazy-load></image>
            </view>
          </view>
        </view>

        <!-- 指示器 -->
        <!-- <view class="indicators">
        <view class="indicator" wx:for="{{works}}" wx:key="id" data-index="{{index}}" bindtap="selectSlide" style="background-color: {{index === currentSlide ? '#ff6b6b' : '#ccc'}};"></view>
      </view> -->
      </view>

      <!-- 作品列表或详情展示区域 -->
      <view>
        <view class="image-Box">
          <view class="image-title">陈奥作品一览</view>
          <scroll-view type="list" scroll-x>
            <view class="image-list">
              <view class="image-item" wx:for="{{works}}" wx:key="id">
                <image class="image-thumb" src="{{item.cover}}" mode="aspectFill" lazy-load></image>
              </view>
            </view>
          </scroll-view>
        </view>
      </view>

    </view>
    <view class="carousel-container1" wx:else>
      <!-- 返回列表按钮 -->
      <view class="back-button" bindtap="backToList">
        <text class="back-text">返回</text>
      </view>
      
        <image src="{{selectedWork.cover}}" mode="aspectFill" class="selected-work-image" lazy-load></image>
      <!-- 普通轮播图样式 -->
      <swiper class="normal-swiper"  autoplay="{{false}}" interval="5000" duration="1000" bindchange="onSwiperChange" current="{{currentSlide}}">
        <block wx:for="{{works}}" wx:key="id">
          <swiper-item class="swiper-item">
            <view class="swiper-content">
              <image src="{{item.cover}}" class="swiper-image" mode="aspectFill" lazy-load bindtap="onSwiperImageTap"></image>
            </view>
            <view class="detail-section">
              <view class="detail-header">
                <text class="detail-title">{{item.title}}</text>
                <view class="like-button" bindtap="toggleLike">
                  <text class="like-icon">{{item.isLiked ? '♥' : '♡'}}</text>
                  <text class="like-count">{{item.likes}}</text>
                </view>
              </view>
              <text class="detail-description">{{item.description}}</text>
            </view>
          </swiper-item>
        </block>
      </swiper>

    </view>

  </view>
</global-background>