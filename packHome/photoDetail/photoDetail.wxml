<global-background>
  <custom-navbar title="name" showBack="{{true}}" showHome="{{false}}"></custom-navbar>
  <view class="container" style="margin-top: {{navBarHeight}}px;min-height:calc(100vh - {{navBarHeight}}px);">
    <view class="waterfall-container">
      <view class="waterfall-column">
        <block wx:for="{{photos}}" wx:key="_id" wx:for-index="index">
          <!-- 只在偶数索引显示在左列 -->
          <view wx:if="{{index % 2 === 0}}" class="photo-card">
            <view class="photo-wrapper" bindtap="viewPhoto" data-image="{{item.imageUrl}}">
              <image class="photo-image" src="{{item.imageUrl}}" mode="widthFix"></image>
            </view>
            <view class="photo-info">
              <view class="photo-description">{{item.description}}</view>
              <view class="photo-actions">
                <view class="like-section {{item.isLiked ? 'liked' : ''}}" data-id="{{item._id}}" data-index="{{index}}" bindtap="likePhoto">
                  {{item.likes || 0}}❤️
                </view>
                <view class="user-info">
                  <image class="user-avatar" src="{{item.userAvatar}}" mode="aspectFill"></image>
                  <view class="user-details">
                    <text class="user-name">{{item.userName}}</text>
                    <text class="post-time">{{item.createTime}}</text>
                  </view>
                </view>
              </view>
            </view>
          </view>
        </block>
      </view>
      <view class="waterfall-column">
        <block wx:for="{{photos}}" wx:key="_id" wx:for-index="index">
          <!-- 只在奇数索引显示在右列 -->
          <view wx:if="{{index % 2 === 1}}" class="photo-card">
            <view class="photo-wrapper" bindtap="viewPhoto" data-image="{{item.imageUrl}}">
              <image class="photo-image" src="{{item.imageUrl}}" mode="widthFix"></image>
            </view>
            <view class="photo-info">
              <view class="photo-description">{{item.description}}</view>
              <view class="photo-actions">
                <view class="like-section {{item.isLiked ? 'liked' : ''}}" data-id="{{item._id}}" data-index="{{index}}" bindtap="likePhoto">
                  {{item.likes || 0}}❤️
                </view>
                <view class="user-info">
                  <image class="user-avatar" src="{{item.userAvatar}}" mode="aspectFill"></image>
                  <view class="user-details">
                    <text class="user-name">{{item.userName}}</text>
                    <text class="post-time">{{item.createDate}}{{item.createTime}}</text>
                  </view>
                </view>
              </view>
            </view>
          </view>
        </block>
      </view>
    </view>
    <view wx:if="{{photos.length === 0}}" class="empty-state">
      <text>暂无照片</text>
    </view>
  </view>
</global-background>