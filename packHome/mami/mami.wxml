<!-- packHome/mami/mami.wxml -->
<view class="container">
  <!-- 星空背景 -->
  <view class="star-background">
    <block wx:for="{{stars}}" wx:key="id">
      <view class="star" style="left: {{item.x}}%; top: {{item.y}}%; width: {{item.size}}px; height: {{item.size}}px; opacity: {{item.opacity}};"></view>
    </block>
  </view>
  <!-- 页面标题 -->
  <view class="header">
    <text class="page-title">Orm妈粉专属档案</text>
  </view>
  <!-- 神秘盒子容器 -->
  <view class="mystery-box-container">
    <!-- 中央展示盒 -->
    <view class="center-box" bindtap="openMysteryBox">
      <view class="box-lid" style="transform: {{lidTransform}}"></view>
      <view class="box-body"></view>
      <view class="box-glow"></view>
    </view>
    <!-- 环绕的趣事球 -->
    <block wx:for="{{floatingItems}}" wx:key="index">
      <view class="floating-ball" style="top: {{item.top}}%; left: {{item.left}}%; transform: scale({{item.scale}}); opacity: {{item.opacity}};" data-index="{{index}}" bindtap="selectFloatingBall">
        <text class="ball-number">{{item.number}}</text>
      </view>
    </block>
    <!-- 展示面板 -->
    <view class="display-panel {{showPanel ? 'show' : ''}}">
      <view class="panel-header">
        <text class="panel-title">趣事 #{{currentItem.number}}</text>
        <view class="close-btn" bindtap="closePanel">×</view>
      </view>
      <view class="panel-content">
        <text class="panel-text">{{currentItem.text}}</text>
      </view>
      <view class="panel-footer">
        <view class="nav-btn prev" bindtap="prevItem">上一个</view>
        <view class="nav-btn next" bindtap="nextItem">下一个</view>
      </view>
    </view>
  </view>
  <!-- 底部提示 -->
  <view class="footer-tip">
    <text>点击中央宝箱或周围的趣事球查看内容</text>
  </view>
</view>