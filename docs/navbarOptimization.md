# 自定义导航栏高度优化方案

## 概述

为了解决每个页面都需要手动处理自定义导航栏高度的问题，我们提供了一套优化方案，通过组件自动处理和基类封装的方式，减少重复代码。

## 解决方案

### 1. 自动设置页面数据

`customNavbar` 组件在加载时会自动计算导航栏高度，并将该高度设置到当前页面的 `navBarHeight` 数据字段中。这意味着页面可以直接在 WXML 中使用 `{{navBarHeight}}` 来获取导航栏高度。

### 2. 使用方式

#### 在 WXML 中：
```xml
<custom-navbar title="页面标题"></custom-navbar>
<view class="container" style="margin-top: {{navBarHeight}}px;">
  <!-- 页面内容 -->
</view>
```

注意：不再需要手动绑定 `bind:navbarheightchange` 事件。

#### 在 JS 中：
如果使用了 `utils/basePage.js`，则完全不需要任何额外处理。
如果未使用基类，则确保页面 data 中包含 `navBarHeight: 0`。

### 3. 兼容性处理

组件会自动处理不同设备的导航栏高度差异，确保在各种设备上都能正确显示。

## 优势

1. **减少重复代码**：不再需要在每个页面中添加相同的处理逻辑
2. **自动适配**：根据设备信息自动计算导航栏高度
3. **易于维护**：所有逻辑集中在组件内部，便于统一修改
4. **向后兼容**：原有的事件绑定方式仍然可用

## 注意事项

1. 确保页面的 `.container` 或相应元素使用了 `style="margin-top: {{navBarHeight}}px;"` 
2. 如果页面有特殊的导航栏高度处理需求，仍可以使用原有的事件绑定方式