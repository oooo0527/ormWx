<!-- packageA/hot/hot.wxml -->
<global-background>
  <custom-navbar title="热门留言" showBack="{{true}}" showHome="{{false}}"></custom-navbar>
  <view class="container" style="margin-top: {{navBarHeight}}px;min-height:calc(100vh - {{navBarHeight}}px);">
    <!-- 热门留言列表 -->
    <scroll-view class="hot-list" scroll-y="true" style="height:calc(100vh - {{navBarHeight}}px);">
      <!-- 加载状态 -->
      <view class="loading" wx:if="{{loading}}">
        <view class="loading-spinner"></view>
        <text class="loading-text">加载中...</text>
      </view>
      <!-- 留言列表 -->
      <view class="list" wx:else>
        <view class="empty" wx:if="{{hotList.length === 0 && !loading}}">
          <text class="empty-text">暂无热门留言</text>
        </view>
        <view class="item" wx:for="{{hotList}}" wx:key="_id">
          <view class="item-header">
            <text class="item-title">{{item.title}}</text>
            <text class="item-time">{{item.createTime}}</text>
          </view>
          <view class="item-content">
            <image class="item-image" wx:if="{{item.images && item.images.length>0}}" src="{{item.images[0]}}" lazy-load mode="widthFix"></image>
            <!-- 收起/展开内容 -->
            <text class="{{item.isExpanded ? '' : 'collapsed'}}">{{item.content}}</text>
            <view class="expand-collapse" wx:if="{{item.content && item.content.length > 50}}">
              <text class="expand-btn" bindtap="toggleContent" data-index="{{index}}">
                {{item.isExpanded ? '收起' : '展开'}}
              </text>
            </view>
          </view>
        </view>
      </view>
      <!-- 加载更多提示 -->
      <view class="load-more" wx:if="{{loading && hotList.length > 0}}">
        <text>加载中...</text>
      </view>
      <view class="load-more" wx:elif="{{!hasMore && hotList.length > 0}}">
        <text>没有更多了</text>
      </view>
    </scroll-view>
  </view>
</global-background>